<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All Students</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
</head>
<body>

{% include "_topbar.html" %}  

<div class="container">
  <h1>ğŸ‘©â€ğŸ“ All Students</h1>
  <p class="subtitle">
    Search students by <strong>name</strong> OR filter by <strong>class</strong>
  </p>

  <div class="form-card" style="margin-bottom:20px;">

    <!-- ğŸ” Search by Name -->
    <form method="GET" style="margin-bottom:15px;">
      <input
        type="text"
        name="search"
        placeholder="Search student by name"
        value="{{ search_name if search_name else '' }}"
      >
      <button type="submit" class="btn">Search</button>
    </form>

    <hr>

    <!-- ğŸ« Filter by Class -->
    <form method="GET">
      <label><strong>Filter by Class</strong></label>
      <select name="class"
              onchange="this.form.submit()"
              style="width:100%; padding:10px; margin-top:8px;">
        <option value="">Select Class</option>
        {% for c in classes %}
          <option value="{{ c }}" {% if c == selected_class %}selected{% endif %}>
            {{ c }}
          </option>
        {% endfor %}
      </select>
    </form>

  </div>

  {% if students %}
    <div class="card">
      {% for s in students %}
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <div>
            <strong>{{ s.name }}</strong><br>
            <small>Class {{ s.class }} | Roll {{ s.roll }}</small>
          </div>

          <div>
            <a href="{{ url_for('view_report', student_id=s.id) }}"
               class="btn secondary">
              ğŸ“„ Report
            </a>

            <a href="{{ url_for('student_attendance', student_id=s.id) }}"
               class="btn secondary">
              ğŸ“Š Attendance
            </a>
          </div>
        </div>
        <hr>
      {% endfor %}
    </div>
  {% else %}
    <p>No students found.</p>
  {% endif %}

  
</div>

</body>
</html>
